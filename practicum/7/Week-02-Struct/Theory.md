# Struct - част 2

## Вложени структури

Структурите могат да съдържат в себе си данни, които също са структури. 

```c++
struct Point{
    double x;
    double y;
}

struct Circle{
    Point center; // Центъра на окръжността е точка
    double radius;
}
```
При създаването на обект от тип `Circle`, се създава и обект от тип `Point`, който се съдържа в него.   

Съответно при инициализирането обект от тип `Circle`, трябва да се инициализират и полетата на вложената структура `Point`
```c++
void initializePoint(Point& p, int x, int y){
    p.x = x;
    p.y = y;
}
void initializeCircle(Circle& c, int x, int y, int radius){
    initializePoint(c.center);
    c.radius = radius;
}
```
*Ако някоя от структурите съдържа динамична памет, трябва да се погрижим за заделянето и триенето ѝ по аналогичен начин*

## Член-функции
Както член-данни, структурите могат да имат и член-функции. Член-фунцкиите могат да:
- Позволяват промяната на обекта, т.е. на член-данните. Те не могат да бъдат викани за константни обекти.
- Да не го позволяват. След тях се пише `const` - това обозначава, че са константни методи и можем да ги използваме и върху константни обекти. В себе си могат да викат само други константни методи.

    ```c++
    struct Point{
        double x;
        double y;
    
        void initialize(double x, double y){ // може дефиницията да е в дефиницията на структурата
            this->x = x;
            this->y = y;
        }
    
        void print() const; // може и само да се декларира
    }

    void Point::print() const{ // а дефиницията да е отвън
        std::cout << x << ", " << y << std::endl;
    }
    ```
Когато член-фунцкиите са дефинирани извън структурата, можем да ги изнасяме и в различни файлове. 

- `Point.h`, в който е дефиницята на структурата        

    ```c++
    #ifndef  __POINT__HEADER__INCLUDED__
    #define __POINT__HEADER__INCLUDED__

    struct Point{
        //...
    }

    #endif 
    ```

    или за MSVC

    ```c++
    #pragma once
    struct Point{
        //...
    }
    ```

- `Point.cpp`, в който са дефинициите на член-фунцкиите. 
    ```c++
    #include "Point.h"

    void Point::print() const{
        //...
    }
    ```
## Извикване 
Както при член-данните, член-фунцкиите се извикват с операторите `.` или `->`.

```c++
int main(){
    Point p;
    p.initialize(2, 3);
    p.print();

    Point* ptr = &p;
    ptr->initialize(4, 5); //тук ще променим стойностите от 2 и 3 на 4 и 5
    ptr->print();

    const Point constant;
    constant.initialize(-1, 1); // НЕ МОЖЕ!
    constant.print(); // всичко е окей, защото print е константна член-фунцкия
}
```

## this

`this` е указател, който всяка член-фунцкия притежава. Той сочи към конкретния обект, за който е извикана фунцкията и чрез него могат да се достъпват данните на този обект.

```c++
Point p;
p.print(); // това извикване на print, ще има указател към p
           // еквивалентно на print(&p);
```